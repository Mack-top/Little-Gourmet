// 创建全局游戏管理器单例
[gd_scene load_steps=2 format=3]

[ext_resource path="res://src/global_game_manager.py" type="Script" id=1]

[node name="GlobalGameManager" type="Node" script_ext_resource=1]

// 全局游戏管理器单例
// 应该在项目启动时自动创建

// 初始化全局游戏管理器
func _ready():
    // 确保只有一个实例存在
    if get_node("/root/GlobalGameManager") != null:
        queue_free()
        return
    
    // 设置为全局节点
    set_process(false)
    set_physics_process(false)
    add_to_group("global_game_manager")

// 获取游戏管理器实例
func get_game_manager():
    var global_game_manager = get_node("/root/GlobalGameManager")
    if global_game_manager:
        return global_game_manager.get_game_manager()
    return null

// 获取装饰品管理器实例
func get_decoration_manager():
    var global_game_manager = get_node("/root/GlobalGameManager")
    if global_game_manager:
        return global_game_manager.get_decoration_manager()
    return null

// 获取菜谱管理器实例
func get_recipe_manager():
    var global_game_manager = get_node("/root/GlobalGameManager")
    if global_game_manager:
        return global_game_manager.get_recipe_manager()
    return null

// 获取玩家设置实例
func get_player_settings(player_id=1):
    var global_game_manager = get_node("/root/GlobalGameManager")
    if global_game_manager:
        return global_game_manager.get_player_settings(player_id)
    return null

// 获取音频管理器实例
func get_audio_manager():
    var global_game_manager = get_node("/root/GlobalGameManager")
    if global_game_manager:
        return global_game_manager.get_audio_manager()
    return null